<ion-content *ngIf="!loading" >
  <!-- Question Card -->
  <ion-card class="quiz-card gradient">
    <ion-card-header>
      <ion-title class="ion-text-center" style="color: white;">{{displayTime}}</ion-title>
      <ion-button fill="clear" class="close-button" size="large" (click)="setEndQuiz()">
        <ion-icon name="close"></ion-icon>
      </ion-button>
      <ion-progress-bar [value]="progress"></ion-progress-bar>
    </ion-card-header>
    <ion-card-content class="ion-text-center">
      <!-- <ion-img src="/assets/images/angular.png" style="display: block; margin: auto;"></ion-img> -->
      <p>
        {{ question?.content }}
        <span *ngIf="selectedAnswer" class="highlight">{{ selectedAnswer }}</span>
      </p>
    </ion-card-content>
  </ion-card>

  <!-- Answers Card -->
  <ion-card class="quiz-card">
    <ion-card-content>
      <ion-grid>
        <ion-row *ngFor="let answer of question?.options">
          <ion-col>
            <ion-button (click)="onSelectedAnswer(answer)" [disabled]="loading || loadingNextQuestion"
              [ngClass]="{'highlight-card': selectedAnswer === answer, 'disabled': selectedAnswer !== null && selectedAnswer !== answer}"
              class="ion-text-wrap">
              {{ answer }}
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>
</ion-content>


<ion-footer *ngIf="!loading">
  <ion-button class="custom-button" [disabled]="!selectedAnswer || loadingNextQuestion" (click)="setUserAnswer()">
    <ion-spinner *ngIf="loadingNextQuestion"></ion-spinner>
    <span *ngIf="!loadingNextQuestion">Next Question</span>
  </ion-button>
</ion-footer>

<ion-loading class="custom-loading" [isOpen]="loading" message="AI generates quiz questions, please wait..."></ion-loading>
