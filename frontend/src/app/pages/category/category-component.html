<ng-container *ngIf="!showAssessmentComponent">
  <ion-content [fullscreen]="true">
    <ion-card class="container">
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-back-button defaultHref="/tabs/tab1"></ion-back-button>
        </ion-buttons>
        <ion-title>Choose a subcategory</ion-title>
      </ion-toolbar>

      <ion-card-content>
        <ion-searchbar (ionInput)="onSearch($event)" placeholder="Search"></ion-searchbar>
        <ion-list *ngIf="!loading; else loadingTemplate">
          <ion-item *ngFor="let item of filteredItems" (click)="onItemSelect(item)"
            [class.selected]="selectedItemId === item">
            <ion-thumbnail slot="start">
              <div class="circle">
                {{ item.name!.charAt(0) }}
              </div>
            </ion-thumbnail>
            <ion-thumbnail slot="end">
              <ion-icon
                size="large"
                [name]="savedState[item.languageId!] ? 'heart' : 'heart-outline'"
                (click)="toggleHeart(item, selectedCategory!)"
                [color]="savedState[item.languageId!] ? 'danger' : 'medium'"
              ></ion-icon>
            </ion-thumbnail>

            <ion-label>{{ item.name }}</ion-label>
          </ion-item>
        </ion-list>


      </ion-card-content>
    </ion-card>

      <ng-template #loadingTemplate>
        <ion-card class="container" style="box-shadow: none;">
          <ion-card-content>
            <ion-list>
              <ion-item>
                <ion-thumbnail slot="start">
                    <ion-skeleton-text [animated]="true" style="width: 36px; height: 36px"></ion-skeleton-text>
                </ion-thumbnail>
                <ion-thumbnail slot="end">
                  <ion-skeleton-text [animated]="true" style="width: 36px; height: 36px"></ion-skeleton-text>
                </ion-thumbnail>
                <ion-label>
                  <ion-skeleton-text [animated]="true" style="width: 100%; height: 40px;"></ion-skeleton-text>
                </ion-label>
              </ion-item>
            </ion-list>
          </ion-card-content>
        </ion-card>

    </ng-template>
  </ion-content>

  <ion-footer>
    <ion-button class="custom-button" [disabled]="!selectedItemId" id="open-loading"
      (click)="onStartQuiz()">Next</ion-button>
  </ion-footer>
</ng-container>

<assessment-component style="display: contents;"  [categoryId]="selectedCategory"   [languageId]="selectedItemId?.languageId || selectedFavCategory" *ngIf="showAssessmentComponent"></assessment-component>
